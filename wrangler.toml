name = "table-to-image-mcp"
main = "src/index.js"
compatibility_date = "2024-01-01"
workers_dev = true

# Worker configuration
[build]
command = "npm install"

# Environment variables with ZERO-CONFIG defaults
# All variables have sensible defaults - NO secrets required!
[vars]
MAX_TABLE_SIZE = "10000"
DEFAULT_IMAGE_FORMAT = "png"
DEFAULT_IMAGE_WIDTH = "800"
DEFAULT_IMAGE_HEIGHT = "600"
RATE_LIMIT = "60"
ENABLE_CORS = "true"
LOG_LEVEL = "info"

# Optional secrets (NOT REQUIRED for deployment)
# To enhance rate limits, optionally set via: wrangler secret put QUICKCHART_API_KEY
# QUICKCHART_API_KEY - Your QuickChart.io API key (optional, uses free tier without it)
# MCP_API_KEY - API key for MCP authentication (optional, no auth without it)

# Production environment
[env.production]
name = "table-to-image-mcp-prod"
route = { pattern = "table-to-image.your-domain.com/*", zone_name = "your-domain.com" }
vars = { ENVIRONMENT = "production" }

# Staging environment
[env.staging]
name = "table-to-image-mcp-staging"
vars = { ENVIRONMENT = "staging", LOG_LEVEL = "debug" }

# Development environment
[env.development]
name = "table-to-image-mcp-dev"
vars = { ENVIRONMENT = "development", LOG_LEVEL = "debug" }

# Resource limits
[limits]
cpu_ms = 50

# Observability
[observability]
enabled = true
head_sampling_rate = 1
